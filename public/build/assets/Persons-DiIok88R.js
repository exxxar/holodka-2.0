import{_ as A}from"./AuthenticatedLayout-B3H97zfn.js";import{o as s,f as o,b as i,n as f,F as p,l as k,t as d,g as l,m as C,d as a,i as v,k as y,c as w,p as F,a as h,u as $,w as b,Z as P}from"./app-B-WCtaZJ.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-kIFXH_Sw.js";const L={props:["pagination"],data(){return{currentPage:1}},computed:{hasPagination(){return!(this.pagination===null||!this.pagination||this.pagination.meta.links[0].active===!1&&this.pagination.meta.links[this.pagination.meta.links.length-1].active===!1)},filteredLinks(){return this.pagination?(parseInt(this.pagination.meta.current_page),this.pagination.meta.links):[]}},methods:{nextPage(){this.currentPage=this.pagination.meta.current_page+1,this.$emit("pagination_page",this.pagination.meta.current_page+1)},page(r){this.currentPage=r,window.scrollTo({top:500,behavior:"smooth"}),this.$emit("pagination_page",r)},prevPage(){this.currentPage!==1&&(this.currentPage=this.pagination.meta.current_page-1,this.$emit("pagination_page",this.pagination.meta.current_page-1))}}},I={key:0,class:"row d-flex justify-content-center"},S={key:0,class:"col-lg-6 dt-pagination d-flex justify-content-center align-items-center"},O={"aria-label":"Page navigation example"},j={class:"pagination"},T={class:"page-item"},U=["onClick"],V={class:"page-item"};function N(r,t,e,n,c,u){return e.pagination?(s(),o("div",I,[e.pagination.links?(s(),o("div",S,[i("nav",O,[i("ul",j,[i("li",T,[i("a",{class:f(["page-link rounded-0",{disabled:e.pagination.links.prev===null}]),onClick:t[0]||(t[0]=(...m)=>u.prevPage&&u.prevPage(...m)),"aria-label":"Previous"},t[2]||(t[2]=[i("span",{"aria-hidden":"true"},"«",-1)]),2)]),(s(!0),o(p,null,k(u.filteredLinks,(m,g)=>(s(),o("li",{class:f(["page-item",{"active-dark":g===e.pagination.meta.current_page}]),key:"paginate"+g,onClick:mt=>u.page(g)},[g!==0&&g!==u.filteredLinks.length-1?(s(),o("a",{key:0,class:f(["page-link rounded-0",{"text-secondary":g!==e.pagination.meta.current_page}]),href:"#"},d(m.label),3)):l("",!0)],10,U))),128)),i("li",V,[i("a",{class:f(["page-link rounded-0 text-secondary",{disabled:e.pagination.links.next===null}]),onClick:t[1]||(t[1]=(...m)=>u.nextPage&&u.nextPage(...m)),"aria-label":"Next "},t[3]||(t[3]=[i("span",{"aria-hidden":"true"},"»",-1)]),2)])])])])):l("",!0)])):l("",!0)}const B=_(L,[["render",N]]),R={class:"alert alert-light my-2 rounded-0"},D={class:"d-flex w-100 flex-wrap align-items-center"},J=["onClick"],M={class:"alert alert-light my-2 rounded-0"},z={class:"d-flex w-100 flex-wrap align-items-center"},E=["onClick"],G={key:0,class:"alert alert-light my-2 rounded-0"},Z={class:"d-flex w-100 flex-wrap align-items-center"},q=["onClick"],H={class:"alert alert-light mb-2 rounded-0"},K={class:"d-flex w-100 flex-wrap align-items-center"},Q={class:"form-floating mr-2"},W={class:"form-floating"},X={class:"row"},Y={class:"col-12"},x={class:"input-group"},ee={class:"form-floating"},te={class:"d-flex w-100 flex-wrap align-items-center mt-2"},se={key:1,class:"mt-3 mb-0"},ie={class:"fw-bold"},oe={key:2,class:"d-flex scrollable-area py-5 mb-3"},le={key:0,class:"table table-responsive"},ne={key:0},re={key:1},ae={key:0},de={key:1},ue={key:0},ce={key:1},pe={key:0},fe={key:1},me={key:0},ge={key:1},ke={key:0},ve={key:1},ye={key:0},he={key:1},be={key:0},we={key:1},Ae={key:0},Ce={key:1},Fe={key:0},$e={key:1},Pe={key:0},_e={key:1},Le={key:0},Ie={key:1},Se={key:0},Oe={key:1},je={key:0},Te={key:1},Ue={key:0},Ve={key:1},Ne={key:0},Be={key:1},Re={key:1,style:{"min-width":"200px"},class:"text-center"},De={class:"form-floating"},Je=["onChange","onUpdate:modelValue"],Me=["value"],ze=["onClick"],Ee=["onClick"],Ge={key:4,class:"text-center"},Ze={key:5,class:"text-center"},qe={key:6,class:"text-center"},He={key:7,class:"text-center"},Ke=["onClick","href"],Qe={key:0,class:"small fst-italic mb-0 mt-1",style:{"line-height":"100%"}},We={key:8,class:"text-center"},Xe={key:9,class:"text-center"},Ye={key:10,class:"text-center"},xe={key:11,class:"text-center"},et={key:12,class:"text-center"},tt={key:13,class:"text-center"},st={key:14,class:"text-center"},it={key:15,class:"text-center"},ot={key:3,class:"alert alert-success",role:"alert"},lt={key:4,class:"row mb-3"},nt={class:"col-12"},rt={data(){return{loaded:!0,loaded_cities:!0,sort:{column:null,direction:"desc",filters:{statuses:[],cities:[],age:{from:null,to:null}}},search:null,current_page:0,paginate_object:null,cities:[],statuses:["Только добавлен","Взят в обработку","Отказ","Сомневается","Успех"],visible_fields:[{title:"№",key:"id",order:0,active:!0},{title:"Статус",key:"status",order:0,active:!1},{title:"Ф.И.О.",key:"name",order:0,active:!0},{title:"Возраст",key:"age",order:0,active:!0},{title:"Д.Р.",key:"birthday",order:0,active:!0},{title:"Группа в ВК",key:"vk_group_link",order:0,active:!1},{title:"Ссылка на пользователя",key:"vk_user_link",order:0,active:!0},{title:"Источник сбора",key:"from",order:0,active:!1},{title:"Город проживания",key:"city",order:0,active:!0},{title:"Число общих друзей",key:"common_count",order:0,active:!1},{title:"Родной город",key:"home_town",order:0,active:!1},{title:"Дата последнего онлайна",key:"last_seen",order:0,active:!1},{title:"Профиль открыть",key:"is_profile_closed",order:0,active:!1},{title:"Сообщения открыты",key:"is_messages_closed",order:0,active:!1},{title:"Состояние учетки",key:"deactivated",order:0,active:!1},{title:"Взят в работу",key:"checked_at",order:0,active:!1},{title:"Пояснение по человеку",key:"checked_comment",order:0,active:!0},{title:"Дата обновления данных",key:"updated_at",order:0,active:!1}],items:[{id:null,name:null,age:null,birthday:null,vk_group_link:null,vk_user_link:null,city:null,from:null,common_count:0,home_town:null,last_seen:null,is_profile_closed:!1,is_messages_closed:!1,deactivated:!1,owner_id:null,checked_at:null,vk_id:null,status:0,checked_comment:null}]}},computed:{...C(["getPersons","getPersonsPaginateObject"])},mounted(){if(this.loadAllCities(),this.loadPersons(),localStorage.getItem("ya_v_dele_visible_fields")){let r=JSON.parse(localStorage.getItem("ya_v_dele_visible_fields"))||[];this.visible_fields.length===r.length&&(this.visible_fields=r)}},methods:{loadAllCities(){this.loaded_cities=!1,this.$store.dispatch("loadAllCities").then(r=>{this.cities=r.cities||[],this.loaded_cities=!0}).catch(()=>{})},checkItem(r){this.items[r].checked_at=new Date,this.$store.dispatch("checkPerson",{person_id:this.items[r].id})},changePersonStatus(r){this.$store.dispatch("changePersonStatus",{person_id:this.items[r].id,status:this.items[r].status||0}).then(()=>{this.$notify({title:"Смена статуса",text:"Статус успешно изменен",type:"success"})}).catch(()=>{this.$notify({title:"Смена статуса",text:"Ошибка изменения статуса",type:"error"})})},changeFieldStatus(r){this.loaded=!1,this.$nextTick(()=>{this.visible_fields[r].active=!this.visible_fields[r].active,localStorage.setItem("ya_v_dele_visible_fields",JSON.stringify(this.visible_fields)),this.loaded=!0})},isFieldActive(r){if(!this.visible_fields||(this.visible_fields||[]).length===0)return!0;let t=this.visible_fields.findIndex(e=>e.key===r);return t===-1?!0:this.visible_fields[t].active},sortAndLoad(r){this.sort.column=r,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadPersons(this.current_page)},resetFilters(){this.sort.filters.age.from=null,this.sort.filters.age.to=null,this.sort.filters.cities=[],this.sort.filters.statuses=[],this.search=null,this.loadPersons(0)},loadPersons(r=0){this.current_page=r,this.$store.dispatch("loadPersons",{dataObject:{search:this.search,filters:this.sort.filters,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getPersons,this.paginate_object=this.getPersonsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(r){this.$emit("select",r)},changeCityFilter(r){let t=this.sort.filters.cities.findIndex(e=>e===r);t===-1?this.sort.filters.cities.push(r):this.sort.filters.cities.splice(t,1)},filterAndLoad(){axios({url:"/persons/excel-download",method:"POST",responseType:"blob",data:{search:this.search,filters:this.sort.filters,order:this.sort.column,direction:this.sort.direction,fields:this.visible_fields}}).then(r=>{const t=URL.createObjectURL(r.data);window.open(t,"_blank").focus(),URL.revokeObjectURL(t)})},changeStatusFilter(r){let t=this.sort.filters.statuses.findIndex(e=>e===r);t===-1?this.sort.filters.statuses.push(r):this.sort.filters.statuses.splice(t,1)},removeItem(r){this.$store.dispatch("removePerson",{materialId:r}).then(()=>{this.sortAndLoad("id")})}}},at=Object.assign(rt,{__name:"PersonTable",setup(r){return(t,e)=>(s(),o(p,null,[i("div",R,[i("div",D,[e[24]||(e[24]=i("h6",{class:"mr-2"},"Отображаемые поля: ",-1)),(s(!0),o(p,null,k(t.visible_fields,(n,c)=>(s(),o(p,null,[i("span",{class:f(["badge m-0 cursor-pointer",{"bg-primary":n.active,"bg-secondary text-white":!n.active}]),onClick:u=>t.changeFieldStatus(c)},d(n.title),11,J),e[23]||(e[23]=a(", "))],64))),256))])]),i("div",M,[i("div",z,[e[26]||(e[26]=i("h6",{class:"mr-2"},"Фильтры статуса: ",-1)),(s(!0),o(p,null,k(t.statuses,(n,c)=>(s(),o(p,null,[i("span",{class:f(["badge m-0 cursor-pointer",{"bg-primary":t.sort.filters.statuses.indexOf(c)!==-1,"bg-secondary text-white":t.sort.filters.statuses.indexOf(c)===-1}]),onClick:u=>t.changeStatusFilter(c)},d(n),11,E),e[25]||(e[25]=a(", "))],64))),256))])]),t.loaded_cities?(s(),o("div",G,[i("div",Z,[e[28]||(e[28]=i("h6",{class:"mr-2"},"Фильтры городов: ",-1)),i("span",{class:f(["badge m-0 cursor-pointer",{"bg-primary":t.sort.filters.cities.indexOf("Без города")!==-1,"bg-secondary text-white":t.sort.filters.cities.indexOf("Без города")===-1}]),onClick:e[0]||(e[0]=n=>t.changeCityFilter("Без города"))}," Без города ",2),e[29]||(e[29]=a(", ")),(s(!0),o(p,null,k(t.cities,(n,c)=>(s(),o(p,null,[i("span",{class:f(["badge m-0 cursor-pointer",{"bg-primary":t.sort.filters.cities.indexOf(n)!==-1,"bg-secondary text-white":t.sort.filters.cities.indexOf(n)===-1}]),onClick:u=>t.changeCityFilter(n)},d(n),11,q),e[27]||(e[27]=a(", "))],64))),256))])])):l("",!0),i("div",H,[i("div",K,[e[32]||(e[32]=i("h6",{class:"mr-2"},"Фильтр возраста: ",-1)),i("div",Q,[v(i("input",{type:"number",min:"0","onUpdate:modelValue":e[1]||(e[1]=n=>t.sort.filters.age.from=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[y,t.sort.filters.age.from]]),e[30]||(e[30]=i("label",{for:"floatingInput"},"Начальное значение",-1))]),i("div",W,[v(i("input",{type:"number",max:"200","onUpdate:modelValue":e[2]||(e[2]=n=>t.sort.filters.age.to=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[y,t.sort.filters.age.to]]),e[31]||(e[31]=i("label",{for:"floatingInput"},"Конечное значение",-1))])])]),i("form",X,[i("div",Y,[i("div",x,[i("div",ee,[v(i("input",{type:"search","onUpdate:modelValue":e[3]||(e[3]=n=>t.search=n),class:"form-control",id:"search-persons"},null,512),[[y,t.search]]),e[33]||(e[33]=i("label",{for:"search-persons"},"Поиск по клиентам",-1))]),i("button",{type:"button",onClick:e[4]||(e[4]=n=>t.loadPersons(0)),class:"btn btn-outline-secondary rounded-0"},e[34]||(e[34]=[i("i",{class:"fa-solid fa-magnifying-glass"},null,-1),a(" Применить фильтры ")])),i("button",{type:"button",onClick:e[5]||(e[5]=(...n)=>t.resetFilters&&t.resetFilters(...n)),class:"btn btn-outline-danger rounded-0"}," Сбросить ")])])]),i("div",te,[i("button",{type:"button",onClick:e[6]||(e[6]=(...n)=>t.filterAndLoad&&t.filterAndLoad(...n)),class:"btn btn-primary rounded-0"}," Скачать эксель ")]),t.paginate_object?(s(),o("p",se,[e[35]||(e[35]=a("Всего найдено: ")),i("span",ie,d(t.paginate_object.meta.total||0),1)])):l("",!0),t.loaded?(s(),o("div",oe,[t.items.length>0?(s(),o("table",le,[i("thead",null,[i("tr",null,[t.isFieldActive("id")?(s(),o("th",{key:0,scope:"col",class:"cursor-pointer",onClick:e[7]||(e[7]=n=>t.sortAndLoad("id"))},[e[38]||(e[38]=a("# ")),t.sort.direction==="desc"&&t.sort.column==="id"?(s(),o("span",ne,e[36]||(e[36]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(s(),o("span",re,e[37]||(e[37]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("status")?(s(),o("th",{key:1,scope:"col",class:"text-center cursor-pointer",onClick:e[8]||(e[8]=n=>t.sortAndLoad("status"))},[e[41]||(e[41]=a("Статус ")),t.sort.direction==="desc"&&t.sort.column==="status"?(s(),o("span",ae,e[39]||(e[39]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="status"?(s(),o("span",de,e[40]||(e[40]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("name")?(s(),o("th",{key:2,scope:"col",class:"text-center cursor-pointer",onClick:e[9]||(e[9]=n=>t.sortAndLoad("name"))},[e[44]||(e[44]=a("ФИО ")),t.sort.direction==="desc"&&t.sort.column==="name"?(s(),o("span",ue,e[42]||(e[42]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="name"?(s(),o("span",ce,e[43]||(e[43]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("age")?(s(),o("th",{key:3,scope:"col",class:"text-center cursor-pointer",onClick:e[10]||(e[10]=n=>t.sortAndLoad("age"))},[e[47]||(e[47]=a("Возраст ")),t.sort.direction==="desc"&&t.sort.column==="age"?(s(),o("span",pe,e[45]||(e[45]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="age"?(s(),o("span",fe,e[46]||(e[46]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("birthday")?(s(),o("th",{key:4,scope:"col",class:"text-center cursor-pointer",onClick:e[11]||(e[11]=n=>t.sortAndLoad("birthday"))},[e[50]||(e[50]=a("Д.Р. ")),t.sort.direction==="desc"&&t.sort.column==="birthday"?(s(),o("span",me,e[48]||(e[48]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="birthday"?(s(),o("span",ge,e[49]||(e[49]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("city")?(s(),o("th",{key:5,scope:"col",class:"text-center cursor-pointer",onClick:e[12]||(e[12]=n=>t.sortAndLoad("city"))},[e[53]||(e[53]=a("Текущий город ")),t.sort.direction==="desc"&&t.sort.column==="city"?(s(),o("span",ke,e[51]||(e[51]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="city"?(s(),o("span",ve,e[52]||(e[52]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("vk_group_link")?(s(),o("th",{key:6,scope:"col",class:"text-center cursor-pointer",onClick:e[13]||(e[13]=n=>t.sortAndLoad("vk_group_link"))},[e[56]||(e[56]=a("Группа вк ")),t.sort.direction==="desc"&&t.sort.column==="vk_group_link"?(s(),o("span",ye,e[54]||(e[54]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="vk_group_link"?(s(),o("span",he,e[55]||(e[55]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("vk_user_link")?(s(),o("th",{key:7,scope:"col",class:"text-center cursor-pointer",onClick:e[14]||(e[14]=n=>t.sortAndLoad("vk_user_link"))},[e[59]||(e[59]=a("Ссылка ")),t.sort.direction==="desc"&&t.sort.column==="vk_user_link"?(s(),o("span",be,e[57]||(e[57]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="vk_user_link"?(s(),o("span",we,e[58]||(e[58]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("from")?(s(),o("th",{key:8,scope:"col",class:"text-center cursor-pointer",onClick:e[15]||(e[15]=n=>t.sortAndLoad("from"))},[e[62]||(e[62]=a("Источник ")),t.sort.direction==="desc"&&t.sort.column==="from"?(s(),o("span",Ae,e[60]||(e[60]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="from"?(s(),o("span",Ce,e[61]||(e[61]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("common_count")?(s(),o("th",{key:9,scope:"col",class:"text-center cursor-pointer",onClick:e[16]||(e[16]=n=>t.sortAndLoad("common_count"))},[e[65]||(e[65]=a("Число общих друзей ")),t.sort.direction==="desc"&&t.sort.column==="common_count"?(s(),o("span",Fe,e[63]||(e[63]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="common_count"?(s(),o("span",$e,e[64]||(e[64]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("home_town")?(s(),o("th",{key:10,scope:"col",class:"text-center cursor-pointer",onClick:e[17]||(e[17]=n=>t.sortAndLoad("home_town"))},[e[68]||(e[68]=a("Родной город ")),t.sort.direction==="desc"&&t.sort.column==="home_town"?(s(),o("span",Pe,e[66]||(e[66]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="home_town"?(s(),o("span",_e,e[67]||(e[67]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("last_seen")?(s(),o("th",{key:11,scope:"col",class:"text-center cursor-pointer",onClick:e[18]||(e[18]=n=>t.sortAndLoad("last_seen"))},[e[71]||(e[71]=a("Дата последнего онлайна ")),t.sort.direction==="desc"&&t.sort.column==="last_seen"?(s(),o("span",Le,e[69]||(e[69]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="last_seen"?(s(),o("span",Ie,e[70]||(e[70]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("is_profile_closed")?(s(),o("th",{key:12,scope:"col",class:"text-center cursor-pointer",onClick:e[19]||(e[19]=n=>t.sortAndLoad("is_profile_closed"))},[e[74]||(e[74]=a("Закрыт профиль? ")),t.sort.direction==="desc"&&t.sort.column==="is_profile_closed"?(s(),o("span",Se,e[72]||(e[72]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="is_profile_closed"?(s(),o("span",Oe,e[73]||(e[73]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("is_messages_closed")?(s(),o("th",{key:13,scope:"col",class:"text-center cursor-pointer",onClick:e[20]||(e[20]=n=>t.sortAndLoad("is_messages_closed"))},[e[77]||(e[77]=a("Закрыты сообщения? ")),t.sort.direction==="desc"&&t.sort.column==="is_messages_closed"?(s(),o("span",je,e[75]||(e[75]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="is_messages_closed"?(s(),o("span",Te,e[76]||(e[76]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("deactivated")?(s(),o("th",{key:14,scope:"col",class:"text-center cursor-pointer",onClick:e[21]||(e[21]=n=>t.sortAndLoad("deactivated"))},[e[80]||(e[80]=a("Состояние учетки ")),t.sort.direction==="desc"&&t.sort.column==="deactivated"?(s(),o("span",Ue,e[78]||(e[78]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="deactivated"?(s(),o("span",Ve,e[79]||(e[79]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0),t.isFieldActive("updated_at")?(s(),o("th",{key:15,scope:"col",class:"text-center cursor-pointer",onClick:e[22]||(e[22]=n=>t.sortAndLoad("updated_at"))},[e[83]||(e[83]=a(" Дата изменения ")),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(s(),o("span",Ne,e[81]||(e[81]=[i("i",{class:"fa-solid fa-caret-down"},null,-1)]))):l("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(s(),o("span",Be,e[82]||(e[82]=[i("i",{class:"fa-solid fa-caret-up"},null,-1)]))):l("",!0)])):l("",!0)])]),i("tbody",null,[(s(!0),o(p,null,k(t.items,(n,c)=>(s(),o("tr",null,[t.isFieldActive("id")?(s(),o("th",{key:0,class:f({"bg-warning":n.checked_at!=null}),scope:"row"},d(n.id||c),3)):l("",!0),t.isFieldActive("status")?(s(),o("td",Re,[i("div",De,[v(i("select",{onChange:u=>t.changePersonStatus(c),"onUpdate:modelValue":u=>t.items[c].status=u,class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},[(s(!0),o(p,null,k(t.statuses,(u,m)=>(s(),o("option",{value:m},d(u),9,Me))),256))],40,Je),[[F,t.items[c].status]]),e[84]||(e[84]=i("label",{for:"floatingSelect"},"Статус обработки клиента",-1))])])):l("",!0),t.isFieldActive("name")?(s(),o("td",{key:2,class:"text-center",onClick:u=>t.selectItem(n)},d(n.name||"-"),9,ze)):l("",!0),t.isFieldActive("age")?(s(),o("td",{key:3,class:"text-center",onClick:u=>t.selectItem(n)},d(n.age||"-"),9,Ee)):l("",!0),t.isFieldActive("birthday")?(s(),o("td",Ge,d(n.birthday||"-"),1)):l("",!0),t.isFieldActive("city")?(s(),o("td",Ze,d(n.city||"-"),1)):l("",!0),t.isFieldActive("vk_group_link")?(s(),o("td",qe,d(n.vk_group_link||"-"),1)):l("",!0),t.isFieldActive("vk_user_link")?(s(),o("td",He,[i("a",{target:"_blank",onClick:u=>t.checkItem(c),class:"btn btn-success",href:"https://vk.com/im?sel="+n.vk_id},"Открыть диалог",8,Ke),n.is_messages_closed?(s(),o("p",Qe,"Сообщения закрыты")):l("",!0)])):l("",!0),t.isFieldActive("from")?(s(),o("td",We,d(n.from||"-"),1)):l("",!0),t.isFieldActive("common_count")?(s(),o("td",Xe,d(n.common_count||"-"),1)):l("",!0),t.isFieldActive("home_town")?(s(),o("td",Ye,d(n.home_town||"-"),1)):l("",!0),t.isFieldActive("last_seen")?(s(),o("td",xe,d(n.last_seen||"-"),1)):l("",!0),t.isFieldActive("is_profile_closed")?(s(),o("td",et,d(n.is_profile_closed?"Закрытый":"Открытый"),1)):l("",!0),t.isFieldActive("is_messages_closed")?(s(),o("td",tt,d(n.is_messages_closed?"Закрытые":"Открытые"),1)):l("",!0),t.isFieldActive("deactivated")?(s(),o("td",st,d(n.deactivated||"Активна"),1)):l("",!0),t.isFieldActive("updated_at")?(s(),o("td",it,d(n.updated_at||"-"),1)):l("",!0)]))),256))])])):l("",!0)])):l("",!0),t.items.length===0?(s(),o("div",ot,e[85]||(e[85]=[i("h4",{class:"alert-heading"},"Клиенты",-1),i("p",null,"К сожалению, раздел клиентов пуст. Вы еще не добавили ни одного клиента, которых можно отобразить на этой странице.",-1),i("hr",null,null,-1),i("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте своего первого клиента",-1)]))):l("",!0),t.items.length>0?(s(),o("div",lt,[i("div",nt,[t.paginate_object?(s(),w(B,{key:0,onPagination_page:t.loadPersons,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0)],64))}}),dt={class:"py-12"},ut={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ct={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},pt={class:"p-6 text-gray-900"},ft={data(){return{loading:!1,selectedClient:null}},methods:{selectClient(r){this.selectedClient=r,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackClientForm(){this.loading=!0,this.selectedClient=null,this.$nextTick(()=>{this.loading=!1})}}},ht=Object.assign(ft,{__name:"Persons",setup(r){return(t,e)=>(s(),o(p,null,[h($(P),{title:"Клиенты"}),h(A,null,{header:b(()=>e[0]||(e[0]=[i("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Клиенты",-1)])),default:b(()=>[i("div",dt,[i("div",ut,[i("div",ct,[i("div",pt,[t.loading?l("",!0):(s(),w(at,{key:0,onSelect:t.selectClient},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{ht as default};
